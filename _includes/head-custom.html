<!-- Fallback static icon -->
<link rel="icon" href="/favicon.ico">

<!-- Dynamic pixel-art favicon: GT gold background, white A → L → I -->
<script>
(function () {
  // Colors
  const GOLD = "#B3A369";   // Georgia Tech "Tech Gold"
  const WHITE = "#FFFFFF";

  // Pixel grid + output size (8x8 pixels scaled to 32x32)
  const GRID = 8, SCALE = 4, SIZE = GRID * SCALE;

  // Define pixel maps (8x8) for A, L, I. '1' = white pixel, '0' = empty.
  const A = [
    "00111100",
    "01000010",
    "10000001",
    "11111111",
    "10000001",
    "10000001",
    "10000001",
    "10000001"
  ];
  const L = [
    "10000000",
    "10000000",
    "10000000",
    "10000000",
    "10000000",
    "10000000",
    "11111111",
    "00000000"
  ];
  const I = [
    "11111111",
    "00011000",
    "00011000",
    "00011000",
    "00011000",
    "00011000",
    "11111111",
    "00000000"
  ];

  const FRAMES = [A, L, I];             // cycle order
  const HOLD_MS = 5000;                  // time each letter stays
  const FADE_MS = 400;                   // crossfade duration

  // Ensure a <link rel="icon"> we can update
  let link = document.querySelector('link#dynamic-favicon[rel="icon"]');
  if (!link) {
    link = document.createElement('link');
    link.id = 'dynamic-favicon';
    link.rel = 'icon';
    link.type = 'image/png';
    document.head.appendChild(link);
  }

  // Drawing surface
  const canvas = document.createElement('canvas');
  canvas.width = SIZE; canvas.height = SIZE;
  const ctx = canvas.getContext('2d');

  function drawMap(map, alpha) {
    ctx.globalAlpha = alpha;
    ctx.fillStyle = WHITE;
    for (let y = 0; y < GRID; y++) {
      const row = map[y];
      for (let x = 0; x < GRID; x++) {
        if (row[x] === '1') {
          ctx.fillRect(x * SCALE, y * SCALE, SCALE, SCALE);
        }
      }
    }
    ctx.globalAlpha = 1;
  }

  function render(fromIdx, toIdx, t) {
    // Background gold square
    ctx.imageSmoothingEnabled = false;
    ctx.fillStyle = GOLD;
    ctx.fillRect(0, 0, SIZE, SIZE);

    // Crossfade letters: from (1-t) → to (t)
    drawMap(FRAMES[fromIdx], 1 - t);
    drawMap(FRAMES[toIdx], t);

    // Update favicon (data URL busts cache)
    link.href = canvas.toDataURL('image/png');
  }

  let i = 0;
  render(0, 1, 0);  // initial frame

  function cycle() {
    const from = i;
    const to = (i + 1) % FRAMES.length;
    const start = performance.now();

    function step(now) {
      const t = Math.min(1, (now - start) / FADE_MS);
      render(from, to, t);
      if (t < 1) requestAnimationFrame(step);
      else { i = to; setTimeout(cycle, HOLD_MS); }
    }
    requestAnimationFrame(step);
  }

  setTimeout(cycle, HOLD_MS); // wait, then animate
})();
</script>
